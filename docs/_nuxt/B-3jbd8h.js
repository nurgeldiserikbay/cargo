import{d as J,u as K,a as Q,b as W,B as X,C as Z,D as ee,k,l as u,E as te,L as oe,w as V,n as re,z as se,r as d,o as m,c as j,e as b,G as ae,f as i,g as le,t as l,h as t,x as o,p as A,q as ce,F as ne,v as de,j as ie,H as ue}from"./Btt9-x6i.js";import{u as be}from"./B_wwVOld.js";import{u as pe}from"./DiNbg2NV.js";const _e={class:"w-full"},he={class:"w-full"},me=o("th",{class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"}," â„– ",-1),fe={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},ve={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},ye={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},ge={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},ke={class:"w-full"},we={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},xe={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Ce={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Ne={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Be={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},$e=J({__name:"products",async setup(Te){let w,x;const C=pe(),N=be(),{$api:E}=ie(),{t:n}=K(),{setLoading:B}=Q(),{setError:z}=W(),T=X(),O=Z(),q=ee(),I=k(10),L=k(0),f=u(()=>Number(T.query.page)||1),P=k([]),p=te({locationType:null});let _=null;const $=u(()=>Math.ceil(L.value/I.value)),v=u(()=>e=>N.getBranchById(e)),F=u(()=>e=>{var r;return((r=v.value(e))==null?void 0:r.address)||""}),U=u(()=>e=>{var c,a;const r=(c=v.value(e))==null?void 0:c.locationId;return r===void 0?"":((a=C.getCityById(r))==null?void 0:a.name)||""||""}),D=u(()=>Object.values(oe).filter(e=>e!=="NULL").map(e=>({id:e,label:n("places."+e)})));V(()=>f.value,()=>{y()}),V(()=>p,()=>{_&&(clearTimeout(_),_=null),_=setTimeout(()=>{y()},500)},{deep:!0}),[w,x]=re(()=>y()),await w,x(),se(async()=>{await N.fetchBranches(),await C.fetchCities()});async function y(){var e,r,c;try{B("global",!0);const a=ae({paged:!0,page:f.value-1,size:I.value,locationType:p.locationType}),{status:g,data:h}=await E.product.getAllProducts(a);g.value==="success"&&(P.value=((e=h.value)==null?void 0:e.content)||[],L.value=((r=h.value)==null?void 0:r.totalElements)||0)}catch(a){(c=a==null?void 0:a.response)!=null&&c._data&&z({title:a.response._data.error||""})}finally{B("global",!1)}}function M(e){O.push({path:q(T.path),query:{page:e}})}return(e,r)=>{const c=d("v-col"),a=d("v-row"),g=d("v-select"),h=d("v-table"),R=d("v-divider"),G=d("v-pagination"),H=d("v-container");return m(),j(H,null,{default:b(()=>[i(a,{class:"text-h6 text-left",justify:"space-between"},{default:b(()=>[i(c,null,{default:b(()=>[le(l(t(n)("titles.products")),1)]),_:1})]),_:1}),i(a,{class:"filters",justify:"space-between"},{default:b(()=>[i(c,{cols:"12",md:"4"},{default:b(()=>[i(g,{value:t(p).locationType,label:t(n)("labels.cityType"),items:t(D),"item-value":"id","item-title":"label","onUpdate:modelValue":r[0]||(r[0]=s=>t(p).locationType=s)},null,8,["value","label","items"])]),_:1})]),_:1}),i(h,{density:"comfortable",hover:!0,class:"table w-full mt-2"},{default:b(()=>[o("thead",_e,[o("tr",he,[me,o("th",fe,l(t(n)("labels.user")),1),o("th",ve,l(t(n)("labels.email")),1),o("th",ye,l(t(n)("labels.phoneNumber")),1),o("th",ge,l(t(n)("labels.branch")),1)])]),o("tbody",ke,[(m(!0),A(ne,null,ce(t(P),(s,Y)=>{var S;return m(),A("tr",{key:s.id,class:ue(["w-full",{"bg-gray-300":Y%2===0}])},[o("td",we,l(s.id),1),o("td",xe,l(`${s.lastName} ${s.firstName}`),1),o("td",Ce,l(s.email),1),o("td",Ne,l(s.phoneNumber),1),o("td",Be,[o("div",null,l(`${t(U)(s.warehouseId)} - ${t(F)(s.warehouseId)}`),1),o("div",null,l((S=t(v)(s.warehouseId))==null?void 0:S.description),1)])],2)}),128))])]),_:1}),i(R,{inset:"",class:"my-4 !max-w-full !ms-0"}),t($)>1?(m(),j(G,{key:0,"model-value":t(f),length:t($),size:"x-small","onUpdate:modelValue":r[1]||(r[1]=s=>M(s))},null,8,["model-value","length"])):de("",!0)]),_:1})}}});export{$e as default};
