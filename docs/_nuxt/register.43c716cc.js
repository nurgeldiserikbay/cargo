import{v as q,_ as U}from"./index.d4a88732.js";import{_ as G}from"./PasswordField.vue.0a8ca939.js";import{_ as H}from"./SelectCity.vue.c7f0d29d.js";import{_ as J}from"./SelectBranch.vue.093b8c12.js";import{d as Q,u as W,D as X,C as ee,a as se,b as oe,k as ae,K as re,A as ne,r as p,o as te,c as le,e as u,j as ie,x as _,f as o,t as g,h as e,i as me,m as i,s as de,L as ce,g as v,_ as ue}from"./entry.d5f47969.js";import{t as pe,z as n,u as fe,a as m}from"./vee-validate-zod.esm.88281908.js";import"./location.e812bf17.js";import"./branch.4b567159.js";const _e={class:"flex-grow-1 d-flex flex-col justify-center items-center pt-6"},be={class:"text-2xl mb-4 capitalize lg:text-3xl"},ge={class:"d-flex justify-center md:col-span-2"},xe=Q({__name:"register",setup(he){const{$api:z}=ie(),{t:a}=W(),P=X(),y=ee(),{setLoading:h}=se(),{setError:w,setSuccess:C}=oe(),x=pe(n.object({firstName:n.string().min(1).max(200),lastName:n.string().min(1).max(200),email:n.string().email(),password:n.string().min(4),confirmPassword:n.string().min(4),phoneNumber:n.string().refine(s=>q.isMobilePhone(s.replace(/\D/g,""),"kk-KZ")),warehouseId:n.number(),promoCode:n.string().min(1).max(200).optional()}).superRefine(({confirmPassword:s,password:d},r)=>{s!==d&&r.addIssue({code:"custom",message:"The passwords did not match"})})),{errors:t,values:I,handleSubmit:S,defineComponentBinds:l}=fe({validationSchema:x}),k=l("firstName"),T=l("lastName"),L=l("email"),O=l("phoneNumber"),$=l("password"),A=l("confirmPassword"),V=l("warehouseId"),f=ae(),j=l("promoCode");function B(){D()}const D=S(async()=>{var s,d;try{h("global",!0);const r=re({...I,phoneNumber:ne(I.phoneNumber||"")},["confirmPassword"]),{status:c,error:b}=await z.auth.register(r);c.value==="success"&&(y.push(P("/auth/login")),C({title:a("messages.successRegister")})),c.value==="error"&&w({title:a(`errors.${((s=b.value)==null?void 0:s.data)||""}`)})}catch(r){(d=r==null?void 0:r.response)!=null&&d._data&&w({title:r.response._data.error||""})}finally{h("global",!1)}},()=>{});return(s,d)=>{const r=p("v-icon"),c=p("v-text-field"),b=U,N=G,E=H,F=J,R=p("v-btn"),K=ue,M=p("v-card"),Y=p("v-container");return te(),le(Y,null,{default:u(()=>[_("div",_e,[o(M,{class:"d-flex flex-col items-center w-full max-w-600px px-5 py-5 pb-6 mb-12 rounded-lg"},{default:u(()=>[_("div",be,g(e(a)("pages.register")),1),_("form",{class:"w-full grid gap-x-2 gap-y-2 md:grid-cols-2",onSubmit:me(B,["prevent"])},[o(c,i(e(k),{label:e(a)("labels.firstName"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).firstName)}),{"append-inner":u(()=>[o(r,{icon:"mdi mdi-asterisk",size:"x-small",color:"red"})]),_:1},16,["label","error-messages"]),o(c,i(e(T),{label:e(a)("labels.lastName"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).lastName)}),{"append-inner":u(()=>[o(r,{icon:"mdi mdi-asterisk",size:"x-small",color:"red"})]),_:1},16,["label","error-messages"]),o(c,i(e(L),{label:e(a)("labels.email"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).email)}),{"append-inner":u(()=>[o(r,{icon:"mdi mdi-asterisk",size:"x-small",color:"red"})]),_:1},16,["label","error-messages"]),o(b,i(e(O),{label:e(a)("labels.phoneNumber"),required:!0,"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).phoneNumber)}),null,16,["label","error-messages"]),o(N,i(e($),{label:e(a)("labels.password"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).password)}),null,16,["label","error-messages"]),o(N,i(e(A),{label:e(a)("labels.confirmPassword"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).confirmPassword)}),null,16,["label","error-messages"]),o(E,{modelValue:e(f),"onUpdate:modelValue":d[0]||(d[0]=Z=>de(f)?f.value=Z:null),"location-filter":("LOCATION_TYPES"in s?s.LOCATION_TYPES:e(ce)).KZ},null,8,["modelValue","location-filter"]),o(F,i(e(V),{"city-id":e(f),errors:("zodI18n"in s?s.zodI18n:e(m))(e(t).warehouseId)}),null,16,["city-id","errors"]),o(c,i(e(j),{label:e(a)("labels.promoCode"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).promoCode)}),null,16,["label","error-messages"]),_("div",ge,[o(R,{class:"me-4",variant:"elevated",type:"submit",disabled:!1},{default:u(()=>[v(g(e(a)("commands.submit")),1)]),_:1})])],32),o(K,{to:"/auth/login",class:"mt-8 no-underline text-color1"},{default:u(()=>[v(g(e(a)("pages.login")),1)]),_:1})]),_:1})])]),_:1})}}});export{xe as default};
