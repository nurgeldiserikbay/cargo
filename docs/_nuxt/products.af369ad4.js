import{d as K,u as O,a as Q,b as W,B as X,C as Y,D as Z,k as x,l as p,E as ee,w as U,n as re,z as oe,r as i,o as m,c as z,e as f,f as c,g as se,t as a,h as e,x as r,p as A,q as le,F as te,v as ae,j as de,H as be}from"./entry.d5f47969.js";import{u as ce}from"./branch.4b567159.js";import{u as ne}from"./location.e812bf17.js";const ie={class:"w-full"},ue={class:"w-full"},pe=r("th",{class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"}," â„– ",-1),_e={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},he={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},me={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},fe={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},ke={class:"w-full"},ve={class:"w-full"},ye={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},xe={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},ge={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},we={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},Ne=r("td",{class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},null,-1),Ve=r("td",{class:"px-2 py-1 border-b-1 border-b-black border-b-solid"},null,-1),Le={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Be={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Ce={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Ie={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},$e={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Ae=K({__name:"products",async setup(Pe){let g,w;const N=ne(),V=ce(),{$api:E}=de(),{t:d}=O(),{setLoading:L}=Q(),{setError:q}=W(),B=X(),T=Y(),j=Z(),C=x(10),I=x(0),k=p(()=>Number(B.query.page)||1),$=x([]),b=ee({id:"",emailLike:"",firstNameLike:"",phoneNumberLike:""});let _=null;const P=p(()=>Math.ceil(I.value/C.value)),v=p(()=>l=>V.getBranchById(l)),D=p(()=>l=>{var o;return((o=v.value(l))==null?void 0:o.address)||""}),F=p(()=>l=>{var n,t;const o=(n=v.value(l))==null?void 0:n.locationId;return o===void 0?"":((t=N.getCityById(o))==null?void 0:t.name)||""||""});U(()=>k.value,()=>{y()}),U(()=>b,()=>{_&&(clearTimeout(_),_=null),_=setTimeout(()=>{y()},500)},{deep:!0}),[g,w]=re(()=>y()),await g,w(),oe(async()=>{await V.fetchBranches(),await N.fetchCities()});async function y(){var l,o,n;try{L("global",!0);const t={paged:!0,page:k.value-1,size:C.value},{status:u,data:h}=await E.product.getAllProducts(t);u.value==="success"&&($.value=((l=h.value)==null?void 0:l.content)||[],I.value=((o=h.value)==null?void 0:o.totalElements)||0)}catch(t){(n=t==null?void 0:t.response)!=null&&n._data&&q({title:t.response._data.error||""})}finally{L("global",!1)}}function M(l){T.push({path:j(B.path),query:{page:l}})}return(l,o)=>{const n=i("v-col"),t=i("v-row"),u=i("v-text-field"),h=i("v-table"),R=i("v-divider"),H=i("v-pagination"),G=i("v-container");return m(),z(G,null,{default:f(()=>[c(t,{class:"text-h6 text-left",justify:"space-between"},{default:f(()=>[c(n,null,{default:f(()=>[se(a(e(d)("titles.locations")),1)]),_:1})]),_:1}),c(h,{density:"comfortable",hover:!0,class:"table w-full mt-2"},{default:f(()=>[r("thead",ie,[r("tr",ue,[pe,r("th",_e,a(e(d)("labels.user")),1),r("th",he,a(e(d)("labels.email")),1),r("th",me,a(e(d)("labels.phoneNumber")),1),r("th",fe,a(e(d)("labels.branch")),1)])]),r("tbody",ke,[r("tr",ve,[r("td",ye,[c(u,{modelValue:e(b).id,"onUpdate:modelValue":o[0]||(o[0]=s=>e(b).id=s),placeholder:e(d)("labels.search")},null,8,["modelValue","placeholder"])]),r("td",xe,[c(u,{modelValue:e(b).firstNameLike,"onUpdate:modelValue":o[1]||(o[1]=s=>e(b).firstNameLike=s),placeholder:e(d)("labels.search")},null,8,["modelValue","placeholder"])]),r("td",ge,[c(u,{modelValue:e(b).emailLike,"onUpdate:modelValue":o[2]||(o[2]=s=>e(b).emailLike=s),placeholder:e(d)("labels.search")},null,8,["modelValue","placeholder"])]),r("td",we,[c(u,{modelValue:e(b).phoneNumberLike,"onUpdate:modelValue":o[3]||(o[3]=s=>e(b).phoneNumberLike=s),placeholder:e(d)("labels.search")},null,8,["modelValue","placeholder"])]),Ne,Ve]),(m(!0),A(te,null,le(e($),(s,J)=>{var S;return m(),A("tr",{key:s.id,class:be(["w-full",{"bg-gray-300":J%2===0}])},[r("td",Le,a(s.id),1),r("td",Be,a(`${s.lastName} ${s.firstName}`),1),r("td",Ce,a(s.email),1),r("td",Ie,a(s.phoneNumber),1),r("td",$e,[r("div",null,a(`${e(F)(s.warehouseId)} - ${e(D)(s.warehouseId)}`),1),r("div",null,a((S=e(v)(s.warehouseId))==null?void 0:S.description),1)])],2)}),128))])]),_:1}),c(R,{inset:"",class:"my-4 !max-w-full !ms-0"}),e(P)>1?(m(),z(H,{key:0,"model-value":e(k),length:e(P),size:"x-small","onUpdate:modelValue":o[4]||(o[4]=s=>M(s))},null,8,["model-value","length"])):ae("",!0)]),_:1})}}});export{Ae as default};
