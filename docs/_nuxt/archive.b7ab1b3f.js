import{_ as H}from"./ProdictHistory.8c899e3f.js";import{_ as I}from"./ListEmptyBanner.3ca56ffd.js";import{d as M,D as S,C as T,B as U,a as G,l as J,k as p,n as K,w as O,r as o,o as m,c as C,e as t,f as n,x as r,t as l,h as s,p as Q,q as W,F as X,v as Y,j as Z,g as L,i as ee,M as te}from"./entry.d5f47969.js";const ae={class:"text-h4 ml-4 mb-5 mt-6"},oe={class:"flex gap-x-2 grow-1"},se={class:"text-md basis-50 grow-1 max-w-[42%]"},ne={class:"text-xs grow-1 max-w-[46%]"},ce=M({__name:"archive",async setup(re){let b,k;const $=S(),B=T(),v=U(),{$api:f}=Z(),{setLoading:i}=G(),g=J(()=>Number(v.query.page||1)),h=p(10),P=p([]),x=p(0),N=p(null);[b,k]=K(()=>w()),await b,k(),O(()=>v.query,()=>{w()});async function w(){var e,a;try{i("global",!0);const c={paged:!0,page:g.value-1,size:h.value,state:"ARCHIVED"},{status:y,data:u}=await f.product.getAllProducts(c);y.value==="success"&&(P.value=((e=u.value)==null?void 0:e.content)||[],x.value=((a=u.value)==null?void 0:a.totalPages)||0);const{data:_}=await f.product.getProductsCount();_&&(N.value=_.value)}catch(c){throw new Error(c)}finally{i("global",!1)}}async function V(e){try{i("global",!0);const{status:a}=await f.product.sendFromArchive(e);a.value==="success"&&w()}catch(a){throw new Error(a)}finally{i("global",!1)}}function E(e){B.push({path:$(v.path),query:{page:e}})}return(e,a)=>{const c=o("v-btn"),y=H,u=o("v-expansion-panel"),_=o("v-expansion-panels"),q=I,z=o("v-data-iterator"),F=o("v-pagination"),D=o("v-card"),R=o("v-container");return m(),C(R,{class:"product-list flex-grow-1 d-flex flex-col justify-start items-center"},{default:t(()=>[n(D,{class:"w-full"},{default:t(()=>[r("div",ae,l(e.$t("pages.archive")),1),n(z,{items:s(P),"items-per-page":s(h)},{default:t(({items:j})=>[(m(!0),Q(X,null,W(j,(d,A)=>(m(),C(_,{key:A,variant:"accordion",class:"condensed"},{default:t(()=>[n(u,{size:"small"},{title:t(()=>[r("div",oe,[r("div",se,[r("span",null,l((s(g)-1)*s(h)+A+1),1),L(" "+l(d.raw.trackCode),1)]),r("div",ne,l(d.raw.description),1),n(c,{size:"small",color:"secondary",class:"relative !color-color1",onClick:ee(le=>V(d.raw.id),["stop","prevent"])},{default:t(()=>[L(l(e.$t("commands.backArchive")),1)]),_:2},1032,["onClick"])])]),text:t(()=>[n(y,{id:d.raw.id},null,8,["id"])]),_:2},1024)]),_:2},1024))),128))]),"no-data":t(()=>[n(q,{class:"mt-5 mb-10"})]),_:1},8,["items","items-per-page"]),s(x)>1?(m(),C(F,{key:0,"model-value":s(g),length:s(x),class:"mt-4 mb-5",size:"x-small","onUpdate:modelValue":E},null,8,["model-value","length"])):Y("",!0)]),_:1})]),_:1})}}});const de=te(ce,[["__scopeId","data-v-0d371a8d"]]);export{de as default};
