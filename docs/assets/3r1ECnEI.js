import{j as L,m as C,a as N,c as D}from"./BT9LgsZd.js";import{d as h,c as $,o as t,m as l,aa as c,u as m,k as r,ab as k,ah as x,Q as B,a as E,w as j,a2 as R,P as w,ai as b,a1 as T,j as V}from"./9z15omkZ.js";const A={class:"relative rounded-full flex justify-center items-center"},z={class:"flex items-center justify-center"},I=["src"],P={key:0,class:"absolute top-1/5 left-1/4 min-w-10 py-0 px-2 rounded-md bg-red-600 px-1 text-sm text-light-600 font-900 transform -translate-1/2"},S=["src"],F=["src"],O=h({__name:"LevelType",props:{levelType:{default:L.BRONZE},active:{type:Boolean,default:!1},count:{default:0},small:{type:Boolean,default:!1}},setup(v){const s=C(),i=v,u=$(()=>i.count<99?i.count:"+99");return(e,_)=>(t(),l("div",A,[c("div",z,[c("img",{src:`${m(s).public.assets}/assets/img/${e.levelType.toLowerCase()}.png`,alt:"",class:r(["object-contain select-none drag-none pointer-events-none",{"w-[30px] h-[30px]":e.small,"w-[60px] h-[60px]":!e.small}])},null,10,I)]),e.count?(t(),l("div",P,k(m(u)),1)):x("",!0),c("div",{class:r(["absolute rounded-full",{"bottom-1/100 -right-1/10":e.small,"bottom-1 right-0":!e.small}])},[e.active?(t(),l("img",{key:0,src:`${m(s).public.assets}/assets/img/active.png`,alt:"",class:r(["block",{"w-3 h-3":e.small,"w-4 h-4":!e.small}])},null,10,S)):(t(),l("img",{key:1,src:`${m(s).public.assets}/assets/img/none-active.png`,alt:"",class:r(["block",{"w-3 h-3":e.small,"w-4 h-4":!e.small}])},null,10,F))],2)]))}}),Q={class:"relative rounded-full mb-1"},Y=h({__name:"ReferalItem",props:{user:{},active:{type:Boolean,default:!1}},setup(v){return(s,i)=>{const u=O;return t(),l("div",{class:r(["flex flex-col items-center text-center bg-light py-2 px-3 rounded-md min-w-30 shadow-lg",{arrow:s.active}])},[c("div",Q,[B(u,{"level-type":s.user.level,active:s.user.active,class:"z-10",count:s.user.referals||0},null,8,["level-type","active","count"])]),c("div",{class:r(["text-[10px] whitespace-pre-line font-700 text-gray-800 text-xs py-1 px-2 bg-backColor rounded-md grow-1",{"bg-green-500 text-white":s.active}])},k(`${s.user.lastName} ${s.user.firstName} 
 ID: ${s.user.id}`),3)],2)}}}),Z={class:"flex flex-col items-center max-h-full"},q={key:0,class:"mb-4 px-5 pt-2 rounded-lg"},G={class:"flex-grow-1 max-w-full max-h-full"},H={class:"relative px-5 py-2 pt-4 rounded-lg flex gap-3 w-min"},U=h({__name:"ReferalsItem",props:{active:{type:Boolean,default:!1},user:{}},setup(v){const{$api:s}=D(),{setLoading:i}=N(),u=v,e=E([]),_=$(()=>(n,d)=>{var a;return((a=e.value[n+1])==null?void 0:a.seleted)===d});j(()=>u.user,()=>{y(0,u.user)},{immediate:!0});async function y(n,d){var a;try{if(d.referals===0)return;i("global",!0);const f={paged:!0,id:d.id},{status:g,data:p}=await s.user.getReferrals(f);if(g.value==="success"&&(a=p.value)!=null&&a.content){const o=e.value.slice(0,n);o[n]={seleted:d.id,list:p.value.content},e.value=o}}catch(f){throw new Error(f)}finally{i("global",!1)}}return(n,d)=>{const a=Y,f=R("dragscroll");return t(),l("div",Z,[n.user?(t(),l("div",q,[B(a,{user:n.user,active:!0},null,8,["user"])])):x("",!0),c("div",G,[(t(!0),l(w,null,b(m(e),(g,p)=>T((t(),l("div",{key:p,class:"pb-2 overflow-y-hidden w-full hidden-scroll select-none drag-none"},[c("div",H,[(t(!0),l(w,null,b(g.list,o=>(t(),V(a,{key:o.id,user:o,active:m(_)(p,o.id),class:r({"cursor-pointer":o.referals>0}),onDblclick:J=>y(p+1,o)},null,8,["user","active","class","onDblclick"]))),128))])])),[[f]])),128))])])}}});export{U as _};
