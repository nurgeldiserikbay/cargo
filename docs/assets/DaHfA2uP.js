import{v as q,_ as Q}from"./CHrKzI2O.js";import{_ as U}from"./Cw80M5Hg.js";import{_ as X}from"./CQyW7zkg.js";import{_ as G}from"./BoD4mPh3.js";import{u as H,h as J,g as W,a as ee,b as se,r as oe,e as ae,c as re,L as ne,_ as te}from"./BT9LgsZd.js";import{d as le,a as ie,N as p,o as me,j as de,ac as u,aa as b,Q as o,ab as g,u as e,ae as ce,X as i,A as ue,a7 as v}from"./9z15omkZ.js";import{t as pe,z as n,u as fe,a as m}from"./Bidafszn.js";import"./B4L4hn--.js";import"./BO6X2MPq.js";const be={class:"flex-grow-1 d-flex flex-col justify-center items-center pt-6"},_e={class:"text-2xl mb-4 capitalize lg:text-3xl"},ge={class:"d-flex justify-center md:col-span-2"},Se=le({__name:"register",setup(he){const{$api:z}=re(),{t:a}=H(),P=J(),y=W(),{setLoading:h}=ee(),{setError:N,setSuccess:C}=se(),x=pe(n.object({firstName:n.string().min(1).max(200),lastName:n.string().min(1).max(200),email:n.string().email(),password:n.string().min(4),confirmPassword:n.string().min(4),phoneNumber:n.string().refine(s=>q.isMobilePhone(s.replace(/\D/g,""),"kk-KZ")),warehouseId:n.number(),promoCode:n.string().min(1).max(200).optional()}).superRefine(({confirmPassword:s,password:d},r)=>{s!==d&&r.addIssue({code:"custom",message:"The passwords did not match"})})),{errors:t,values:w,handleSubmit:S,defineComponentBinds:l}=fe({validationSchema:x}),T=l("firstName"),k=l("lastName"),L=l("email"),O=l("phoneNumber"),$=l("password"),A=l("confirmPassword"),V=l("warehouseId"),f=ie(),j=l("promoCode");function B(){E()}const E=S(async()=>{var s,d;try{h("global",!0);const r=oe({...w,phoneNumber:ae(w.phoneNumber||"")},["confirmPassword"]),{status:c,error:_}=await z.auth.register(r);c.value==="success"&&(y.push(P("/auth/login")),C({title:a("messages.successRegister")})),c.value==="error"&&N({title:a(`errors.${((s=_.value)==null?void 0:s.data)||""}`)})}catch(r){(d=r==null?void 0:r.response)!=null&&d._data&&N({title:r.response._data.error||""})}finally{h("global",!1)}},()=>{});return(s,d)=>{const r=p("v-icon"),c=p("v-text-field"),_=Q,I=U,F=X,R=G,D=p("v-btn"),M=te,Y=p("v-card"),K=p("v-container");return me(),de(K,null,{default:u(()=>[b("div",be,[o(Y,{class:"d-flex flex-col items-center w-full max-w-600px px-5 py-5 pb-6 mb-12 rounded-lg"},{default:u(()=>[b("div",_e,g(e(a)("pages.register")),1),b("form",{class:"w-full grid gap-x-2 gap-y-2 md:grid-cols-2",onSubmit:ce(B,["prevent"])},[o(c,i(e(T),{label:e(a)("labels.firstName"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).firstName)}),{"append-inner":u(()=>[o(r,{icon:"mdi mdi-asterisk",size:"x-small",color:"red"})]),_:1},16,["label","error-messages"]),o(c,i(e(k),{label:e(a)("labels.lastName"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).lastName)}),{"append-inner":u(()=>[o(r,{icon:"mdi mdi-asterisk",size:"x-small",color:"red"})]),_:1},16,["label","error-messages"]),o(c,i(e(L),{label:e(a)("labels.email"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).email)}),{"append-inner":u(()=>[o(r,{icon:"mdi mdi-asterisk",size:"x-small",color:"red"})]),_:1},16,["label","error-messages"]),o(_,i(e(O),{label:e(a)("labels.phoneNumber"),required:!0,"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).phoneNumber)}),null,16,["label","error-messages"]),o(I,i(e($),{label:e(a)("labels.password"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).password)}),null,16,["label","error-messages"]),o(I,i(e(A),{label:e(a)("labels.confirmPassword"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).confirmPassword)}),null,16,["label","error-messages"]),o(F,{modelValue:e(f),"onUpdate:modelValue":d[0]||(d[0]=Z=>ue(f)?f.value=Z:null),"location-filter":("LOCATION_TYPES"in s?s.LOCATION_TYPES:e(ne)).KZ},null,8,["modelValue","location-filter"]),o(R,i(e(V),{"city-id":e(f),errors:("zodI18n"in s?s.zodI18n:e(m))(e(t).warehouseId)}),null,16,["city-id","errors"]),o(c,i(e(j),{label:e(a)("labels.promoCode"),"error-messages":("zodI18n"in s?s.zodI18n:e(m))(e(t).promoCode)}),null,16,["label","error-messages"]),b("div",ge,[o(D,{class:"me-4",variant:"elevated",type:"submit",disabled:!1},{default:u(()=>[v(g(e(a)("commands.submit")),1)]),_:1})])],32),o(M,{to:"/auth/login",class:"mt-8 no-underline text-color1"},{default:u(()=>[v(g(e(a)("pages.login")),1)]),_:1})]),_:1})])]),_:1})}}});export{Se as default};
