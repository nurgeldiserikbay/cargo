import{v as j,_ as A}from"./index.04c7cce3.js";import{_ as D}from"./PasswordField.vue.dd408c1f.js";import{d as F,b as M,D as T,a as V,u as $,y as E,A as K,r as l,o as U,c as Z,e as n,x as r,f as t,t as i,h as e,i as q,m as g,g as b,_ as G}from"./entry.81c470a6.js";import{t as H,z as c,u as J,a as h}from"./vee-validate-zod.esm.46b9a928.js";const O={class:"flex-grow-1 d-flex flex-col justify-center items-center pt-6"},Q={class:"text-2xl mb-4 capitalize lg:text-3xl"},R={class:"d-flex justify-center"},oe=F({__name:"login",setup(W){const{setError:m}=M(),x=T(),{setLoading:d}=V(),{t:o}=$(),v=H(c.object({phoneNumber:c.string().refine(s=>j.isMobilePhone(s.replace(/\D/g,""),"kk-KZ")),password:c.string().min(4)})),{errors:p,handleSubmit:w,defineComponentBinds:u}=J({validationSchema:v}),N=u("phoneNumber"),y=u("password"),{status:_,signIn:k}=E(),f=w(async s=>{try{d("global",!0),await k({...s,phoneNumber:K(s.phoneNumber||"")},{callbackUrl:x("/")}),_.value==="unauthenticated"&&m({title:_.value||""})}catch(a){a.status&&m({title:o("messages.loginError")})}finally{d("global",!1)}});return(s,a)=>{const z=A,I=D,L=l("v-btn"),P=G,S=l("v-card"),B=l("v-container");return U(),Z(B,null,{default:n(()=>[r("div",O,[t(S,{class:"d-flex flex-col items-center w-full max-w-400px px-5 py-5 pb-6 mb-12 rounded-lg"},{default:n(()=>[r("div",Q,i(e(o)("pages.login")),1),r("form",{class:"w-full grid gap-x-3 gap-y-4",onSubmit:a[0]||(a[0]=q((...C)=>e(f)&&e(f)(...C),["prevent"]))},[t(z,g(e(N),{label:e(o)("labels.phoneNumber"),"error-messages":("zodI18n"in s?s.zodI18n:e(h))(e(p).phoneNumber)}),null,16,["label","error-messages"]),t(I,g(e(y),{label:e(o)("labels.password"),"error-messages":("zodI18n"in s?s.zodI18n:e(h))(e(p).password)}),null,16,["label","error-messages"]),r("div",R,[t(L,{variant:"elevated",type:"submit"},{default:n(()=>[b(i(e(o)("pages.login")),1)]),_:1})])],32),t(P,{to:"/auth/register",class:"mt-8 no-underline text-color1"},{default:n(()=>[b(i(e(o)("pages.register")),1)]),_:1})]),_:1})])]),_:1})}}});export{oe as default};
