import{u as B,a as P,b as A,c as V}from"./BT9LgsZd.js";import{d as $,N as r,o as L,j as T,ac as l,Q as n,aa as u,ab as b,u as e,X as v,a7 as D,ae as E}from"./9z15omkZ.js";import{t as F,z as c,u as M,a as x}from"./Bidafszn.js";const Q={class:"text-h5 mb-7 text-center"},R={class:"col-span-2 d-flex justify-center"},J=$({__name:"index",setup(X){const{$api:g}=V(),{t:a}=B(),{setLoading:C}=P(),{setError:m,setSuccess:y}=A(),h=F(c.object({trackCode:c.string().min(1).max(150),description:c.optional(c.string().min(1).max(700))})),{errors:p,values:d,handleSubmit:k,defineComponentBinds:f,handleReset:w}=M({validationSchema:h}),z=f("trackCode"),I=f("description"),_=k(async()=>{var s,o;try{if(!d.trackCode)return;const{status:t,error:i}=await g.product.addProduct({trackCode:d.trackCode,description:d.description});t.value==="success"&&(y({title:a("messages.successProductAdd")}),w()),t.value==="error"&&m({title:a(`errors.${((s=i.value)==null?void 0:s.data)||""}`)})}catch(t){(o=t==null?void 0:t.response)!=null&&o._data&&m({title:t.response._data.error||""})}finally{C("global",!1)}},()=>{});return(s,o)=>{const t=r("v-text-field"),i=r("v-btn"),S=r("v-card"),j=r("v-container");return L(),T(j,{class:"flex-grow-1 d-flex flex-col justify-start items-center pt-10"},{default:l(()=>[n(S,{class:"d-flex flex-col items-center w-full max-w-600px px-5 py-2 pb-6 mt-8 mb-8 rounded-lg"},{default:l(()=>[u("form",{class:"w-full gap-x-3 gap-y-4 justify-center",onSubmit:o[0]||(o[0]=E((...N)=>e(_)&&e(_)(...N),["prevent"]))},[u("div",Q,b(e(a)("titles.addProduct")),1),n(t,v(e(z),{label:e(a)("labels.trackCode"),autofocus:!0,"error-messages":("zodI18n"in s?s.zodI18n:e(x))(e(p).trackCode)}),null,16,["label","error-messages"]),n(t,v(e(I),{label:e(a)("labels.description"),"error-messages":("zodI18n"in s?s.zodI18n:e(x))(e(p).description)}),null,16,["label","error-messages"]),u("div",R,[n(i,{class:"me-4",variant:"elevated",type:"submit"},{default:l(()=>[D(b(e(a)("commands.add")),1)]),_:1})])],32)]),_:1})]),_:1})}}});export{J as default};
