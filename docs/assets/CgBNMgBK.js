import{_ as H}from"./BNi4LtLj.js";import{_ as I}from"./BYkmCNvk.js";import{d as J,D as M,C as S,B as T,a as U,l as G,k as _,n as K,w as O,r as o,o as m,c as C,e,f as n,x as r,t as l,h as s,p as Q,q as W,F as X,v as Y,j as Z,g as L,i as tt,J as et}from"./1pfA604F.js";const at={class:"text-h4 ml-4 mb-5 mt-6"},ot={class:"flex gap-x-2 grow-1"},st={class:"text-md basis-50 grow-1 max-w-[42%]"},nt={class:"text-xs grow-1 max-w-[46%]"},ct=J({__name:"archive",async setup(rt){let b,k;const B=M(),N=S(),v=T(),{$api:f}=Z(),{setLoading:i}=U(),g=G(()=>Number(v.query.page||1)),h=_(10),P=_([]),x=_(0),V=_(null);[b,k]=K(()=>w()),await b,k(),O(()=>v.query,()=>{w()});async function w(){var t,a;try{i("global",!0);const c={paged:!0,page:g.value-1,size:h.value,state:"ARCHIVED"},{status:y,data:u}=await f.product.getAllProducts(c);y.value==="success"&&(P.value=((t=u.value)==null?void 0:t.content)||[],x.value=((a=u.value)==null?void 0:a.totalPages)||0);const{data:p}=await f.product.getProductsCount();p&&(V.value=p.value)}catch(c){throw new Error(c)}finally{i("global",!1)}}async function $(t){try{i("global",!0);const{status:a}=await f.product.sendFromArchive(t);a.value==="success"&&w()}catch(a){throw new Error(a)}finally{i("global",!1)}}function E(t){N.push({path:B(v.path),query:{page:t}})}return(t,a)=>{const c=o("v-btn"),y=H,u=o("v-expansion-panel"),p=o("v-expansion-panels"),q=I,z=o("v-data-iterator"),F=o("v-pagination"),D=o("v-card"),R=o("v-container");return m(),C(R,{class:"product-list flex-grow-1 d-flex flex-col justify-start items-center"},{default:e(()=>[n(D,{class:"w-full"},{default:e(()=>[r("div",at,l(t.$t("pages.archive")),1),n(z,{items:s(P),"items-per-page":s(h)},{default:e(({items:j})=>[(m(!0),Q(X,null,W(j,(d,A)=>(m(),C(p,{key:A,variant:"accordion",class:"condensed"},{default:e(()=>[n(u,{size:"small"},{title:e(()=>[r("div",ot,[r("div",st,[r("span",null,l((s(g)-1)*s(h)+A+1),1),L(" "+l(d.raw.trackCode),1)]),r("div",nt,l(d.raw.description),1),n(c,{size:"small",color:"secondary",class:"relative !color-color1",onClick:tt(lt=>$(d.raw.id),["stop","prevent"])},{default:e(()=>[L(l(t.$t("commands.backArchive")),1)]),_:2},1032,["onClick"])])]),text:e(()=>[n(y,{id:d.raw.id},null,8,["id"])]),_:2},1024)]),_:2},1024))),128))]),"no-data":e(()=>[n(q,{class:"mt-5 mb-10"})]),_:1},8,["items","items-per-page"]),s(x)>1?(m(),C(F,{key:0,"model-value":s(g),length:s(x),class:"mt-4 mb-5",size:"x-small","onUpdate:modelValue":E},null,8,["model-value","length"])):Y("",!0)]),_:1})]),_:1})}}}),dt=et(ct,[["__scopeId","data-v-0d371a8d"]]);export{dt as default};
