import{u as J,a as K,b as W,f as X,g as Z,h as ee,L as te,i as oe,c as re}from"./BT9LgsZd.js";import{u as se}from"./BO6X2MPq.js";import{u as ae}from"./B4L4hn--.js";import{d as le,a as w,c as u,r as ce,w as j,an as ne,L as de,N as d,a2 as ie,o as p,j as A,ac as b,Q as i,a7 as ue,ab as l,u as t,a1 as be,m as k,aa as o,P as pe,ai as _e,ah as he,k as me}from"./9z15omkZ.js";const ve={class:"overflow-y-hidden w-full hidden-scroll select-none"},fe={class:"w-full"},ye={class:"w-full"},ge=o("th",{class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"}," â„– ",-1),we={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},ke={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},xe={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},Ne={class:"border-r-1 border-r-black border-r-solid px-2 py-1 border-b-1 border-b-black border-b-solid"},Ce={class:"w-full"},Te={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Be={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Ie={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Le={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Pe={class:"border-r-1 border-r-black border-r-solid px-2 py-1"},Ee=le({__name:"products",async setup($e){let x,N;const C=ae(),T=se(),{$api:E}=re(),{t:n}=J(),{setLoading:B}=K(),{setError:O}=W(),I=X(),z=Z(),D=ee(),L=w(10),P=w(0),v=u(()=>Number(I.query.page)||1),$=w([]),_=ce({locationType:null});let h=null;const S=u(()=>Math.ceil(P.value/L.value)),f=u(()=>e=>T.getBranchById(e)),U=u(()=>e=>{var r;return((r=f.value(e))==null?void 0:r.address)||""}),q=u(()=>e=>{var c,a;const r=(c=f.value(e))==null?void 0:c.locationId;return r===void 0?"":((a=C.getCityById(r))==null?void 0:a.name)||""||""}),F=u(()=>Object.values(te).filter(e=>e!=="NULL").map(e=>({id:e,label:n("places."+e)})));j(()=>v.value,()=>{y()}),j(()=>_,()=>{h&&(clearTimeout(h),h=null),h=setTimeout(()=>{y()},500)},{deep:!0}),[x,N]=ne(()=>y()),await x,N(),de(async()=>{await T.fetchBranches(),await C.fetchCities()});async function y(){var e,r,c;try{B("global",!0);const a=oe({paged:!0,page:v.value-1,size:L.value,locationType:_.locationType}),{status:g,data:m}=await E.product.getAllProducts(a);g.value==="success"&&($.value=((e=m.value)==null?void 0:e.content)||[],P.value=((r=m.value)==null?void 0:r.totalElements)||0)}catch(a){(c=a==null?void 0:a.response)!=null&&c._data&&O({title:a.response._data.error||""})}finally{B("global",!1)}}function M(e){z.push({path:D(I.path),query:{page:e}})}return(e,r)=>{const c=d("v-col"),a=d("v-row"),g=d("v-select"),m=d("v-table"),R=d("v-divider"),Q=d("v-pagination"),Y=d("v-container"),G=ie("dragscroll");return p(),A(Y,null,{default:b(()=>[i(a,{class:"text-h6 text-left",justify:"space-between"},{default:b(()=>[i(c,null,{default:b(()=>[ue(l(t(n)("titles.products")),1)]),_:1})]),_:1}),i(a,{class:"filters",justify:"space-between"},{default:b(()=>[i(c,{cols:"12",md:"4"},{default:b(()=>[i(g,{value:t(_).locationType,label:t(n)("labels.cityType"),items:t(F),"item-value":"id","item-title":"label","onUpdate:modelValue":r[0]||(r[0]=s=>t(_).locationType=s)},null,8,["value","label","items"])]),_:1})]),_:1}),be((p(),k("div",ve,[i(m,{density:"comfortable",hover:!0,class:"table w-full mt-2 min-w-[700px]"},{default:b(()=>[o("thead",fe,[o("tr",ye,[ge,o("th",we,l(t(n)("labels.user")),1),o("th",ke,l(t(n)("labels.email")),1),o("th",xe,l(t(n)("labels.phoneNumber")),1),o("th",Ne,l(t(n)("labels.branch")),1)])]),o("tbody",Ce,[(p(!0),k(pe,null,_e(t($),(s,H)=>{var V;return p(),k("tr",{key:s.id,class:me(["w-full",{"bg-gray-300":H%2===0}])},[o("td",Te,l(s.id),1),o("td",Be,l(`${s.lastName} ${s.firstName}`),1),o("td",Ie,l(s.email),1),o("td",Le,l(s.phoneNumber),1),o("td",Pe,[o("div",null,l(`${t(q)(s.warehouseId)} - ${t(U)(s.warehouseId)}`),1),o("div",null,l((V=t(f)(s.warehouseId))==null?void 0:V.description),1)])],2)}),128))])]),_:1})])),[[G]]),i(R,{inset:"",class:"my-4 !max-w-full !ms-0"}),t(S)>1?(p(),A(Q,{key:0,"model-value":t(v),length:t(S),size:"x-small","onUpdate:modelValue":r[1]||(r[1]=s=>M(s))},null,8,["model-value","length"])):he("",!0)]),_:1})}}});export{Ee as default};
