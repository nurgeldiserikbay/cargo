import{v as C,_ as F}from"./CHrKzI2O.js";import{_ as M}from"./Cw80M5Hg.js";import{b as T,h as V,a as $,u as A,d as D,e as E,_ as K}from"./BT9LgsZd.js";import{d as Q,N as l,o as U,j as X,ac as n,aa as r,Q as a,ab as i,u as e,ae as Z,X as g,a7 as b}from"./9z15omkZ.js";import{t as q,z as c,u as G,a as h}from"./Bidafszn.js";const H={class:"flex-grow-1 d-flex flex-col justify-center items-center pt-6"},J={class:"text-2xl mb-4 capitalize lg:text-3xl"},O={class:"d-flex justify-center"},ae=Q({__name:"login",setup(R){const{setError:m}=T(),v=V(),{setLoading:d}=$(),{t:o}=A(),x=q(c.object({phoneNumber:c.string().refine(s=>C.isMobilePhone(s.replace(/\D/g,""),"kk-KZ")),password:c.string().min(4)})),{errors:p,handleSubmit:w,defineComponentBinds:u}=G({validationSchema:x}),N=u("phoneNumber"),y=u("password"),{status:_,signIn:k}=D(),f=w(async s=>{try{d("global",!0),await k({...s,phoneNumber:E(s.phoneNumber||"")},{callbackUrl:v("/")}),_.value==="unauthenticated"&&m({title:_.value||""})}catch(t){t.status&&m({title:o("messages.loginError")})}finally{d("global",!1)}});return(s,t)=>{const z=F,I=M,L=l("v-btn"),P=K,S=l("v-card"),j=l("v-container");return U(),X(j,null,{default:n(()=>[r("div",H,[a(S,{class:"d-flex flex-col items-center w-full max-w-400px px-5 py-5 pb-6 mb-12 rounded-lg"},{default:n(()=>[r("div",J,i(e(o)("pages.login")),1),r("form",{class:"w-full grid gap-x-3 gap-y-4",onSubmit:t[0]||(t[0]=Z((...B)=>e(f)&&e(f)(...B),["prevent"]))},[a(z,g(e(N),{label:e(o)("labels.phoneNumber"),"error-messages":("zodI18n"in s?s.zodI18n:e(h))(e(p).phoneNumber)}),null,16,["label","error-messages"]),a(I,g(e(y),{label:e(o)("labels.password"),"error-messages":("zodI18n"in s?s.zodI18n:e(h))(e(p).password)}),null,16,["label","error-messages"]),r("div",O,[a(L,{variant:"elevated",type:"submit"},{default:n(()=>[b(i(e(o)("pages.login")),1)]),_:1})])],32),a(P,{to:"/auth/register",class:"mt-8 no-underline text-color1"},{default:n(()=>[b(i(e(o)("pages.register")),1)]),_:1})]),_:1})])]),_:1})}}});export{ae as default};
