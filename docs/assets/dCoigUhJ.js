import{_ as G}from"./C4OMlPvu.js";import{_ as J}from"./8XHwsNhV.js";import{d as W,c as q,a as C,an as X,w as ee,N as c,o as r,j as d,ac as s,aa as _,m as k,ai as B,u as t,P as V,Q as f,ah as T,ab as i,a7 as P,ae as Y}from"./9z15omkZ.js";import{h as te,g as ae,f as oe,a as se,L as E,C as ne,c as re,k as le}from"./BT9LgsZd.js";const ce={class:"w-full md:max-w-70vw flex justify-around items-center gap-x-2 mt-15 relative mb-12"},ie={key:0,class:"absolute left-0 top-0 z-1 px-2 py-0 rounded-xl text-sm transform -translate-x-1/2 -translate-y-1/2 bg-yellow-200"},ue={class:"mr-2 font-500"},pe={class:"flex gap-x-2 grow-1"},de={class:"text-md basis-50 grow-1 max-w-[42%]"},_e={class:"text-xs grow-1 max-w-[46%]"},me=W({__name:"product-list",async setup(ve){let O,$;const A=te(),z=ae(),m=oe(),{$api:y}=re(),{setLoading:u}=se(),n=q(()=>String(m.query.type||"")),x=q(()=>Number(m.query.page||1)),N=C(10),S=C([]),L=C(0),v=C(null);[O,$]=X(()=>g()),await O,$(),ee(()=>m.query,()=>{g()});async function g(){var e,a;try{u("global",!0);const l={paged:!0,page:x.value-1,size:N.value};n.value&&n.value!==E.NULL&&(l.locationType=n.value);const{status:b,data:h}=await y.product.getAllProducts(l);b.value==="success"&&(S.value=((e=h.value)==null?void 0:e.content)||[],L.value=((a=h.value)==null?void 0:a.totalPages)||0);const{data:w}=await y.product.getProductsCount();w&&(v.value=w.value)}catch(l){throw new Error(l)}finally{u("global",!1)}}async function j(e){try{u("global",!0);const{status:a}=await y.product.sendToArchive(e);a.value==="success"&&g()}catch(a){throw new Error(a)}finally{u("global",!1)}}async function U(e){try{u("global",!0);const{status:a}=await y.product.deleteProduct(e);a.value==="success"&&g()}catch(a){throw new Error(a)}finally{u("global",!1)}}function D(e){z.push({path:A(m.path),query:{type:e||""}})}function R(e){z.push({path:A(m.path),query:{type:n.value||"",page:e}})}return(e,a)=>{const l=c("v-btn"),b=G,h=c("v-expansion-panel"),w=c("v-expansion-panels"),F=J,H=c("v-data-iterator"),K=c("v-pagination"),M=c("v-card"),Q=c("v-container");return r(),d(Q,{class:"product-list flex-grow-1 d-flex flex-col justify-start items-center"},{default:s(()=>[_("div",ce,[(r(!0),k(V,null,B(("CONTENT"in e?e.CONTENT:t(ne)).places,o=>(r(),d(l,{key:o.id,size:e.$vuetify.display.mdAndDown?"small":"default",active:o.type===t(n),color:o.type===t(n)?"teal-accent-2":"light-blue-lighten-2",class:"relative",onClick:p=>D(o.type)},{default:s(()=>[t(v)&&t(v)[o.type]?(r(),k("div",ie,i(t(v)[o.type]>100?"+99":t(v)[o.type]),1)):T("",!0),_("span",ue,i(o.type?e.$t(`places.${o.type}`):e.$t("labels.shop")),1)]),_:2},1032,["size","active","color","onClick"]))),128))]),f(M,{class:"w-full"},{default:s(()=>[f(H,{items:t(S),"items-per-page":t(N)},{default:s(({items:o})=>[f(w,{variant:"accordion",class:"condensed"},{default:s(()=>[(r(!0),k(V,null,B(o,(p,I)=>(r(),d(h,{key:I,size:"small"},{title:s(()=>[_("div",pe,[_("div",de,[_("span",null,i((t(x)-1)*t(N)+I+1),1),P(" "+i(p.raw.trackCode),1)]),_("div",_e,i(p.raw.description),1),t(n)===("LOCATION_TYPES"in e?e.LOCATION_TYPES:t(E)).KZ?(r(),d(l,{key:0,size:"small",color:"secondary",class:"relative !color-color1",onClick:Y(Z=>j(p.raw.id),["stop","prevent"])},{default:s(()=>[P(i(e.$t("commands.archive")),1)]),_:2},1032,["onClick"])):T("",!0),t(n)===("LOCATION_TYPES"in e?e.LOCATION_TYPES:t(E)).NULL||t(n)===""?(r(),d(l,{key:1,size:"small",color:"error",class:"relative !color-color1",onClick:Y(Z=>U(p.raw.id),["stop","prevent"])},{default:s(()=>[P(i(e.$t("commands.delete")),1)]),_:2},1032,["onClick"])):T("",!0)])]),text:s(()=>[f(b,{id:p.raw.id},null,8,["id"])]),_:2},1024))),128))]),_:2},1024)]),"no-data":s(()=>[f(F)]),_:1},8,["items","items-per-page"]),t(L)>1?(r(),d(K,{key:0,"model-value":t(x),length:t(L),class:"mt-4 mb-5",size:"x-small","onUpdate:modelValue":R},null,8,["model-value","length"])):T("",!0)]),_:1})]),_:1})}}}),we=le(me,[["__scopeId","data-v-a2860715"]]);export{we as default};
