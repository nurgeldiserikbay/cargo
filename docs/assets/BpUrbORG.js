import{_ as H}from"./yYVEc77-.js";import{_ as I}from"./D-PUWHoF.js";import{d as G,G as M,E as S,D as T,a as U,l as J,k as _,n as K,w as O,r as o,o as m,c as b,e,f as n,z as r,t as l,h as s,s as Q,v as W,F as X,y as Y,j as Z,g as L,i as tt,N as et}from"./DBCDSuVQ.js";const at={class:"text-h4 ml-4 mb-5 mt-6"},ot={class:"flex gap-x-2 grow-1"},st={class:"text-md basis-50 grow-1 max-w-[42%]"},nt={class:"text-xs grow-1 max-w-[46%]"},ct=G({__name:"archive",async setup(rt){let C,k;const N=M(),E=S(),v=T(),{$api:f}=Z(),{setLoading:i}=U(),g=J(()=>Number(v.query.page||1)),h=_(10),P=_([]),w=_(0),V=_(null);[C,k]=K(()=>x()),await C,k(),O(()=>v.query,()=>{x()});async function x(){var t,a;try{i("global",!0);const c={paged:!0,page:g.value-1,size:h.value,state:"ARCHIVED"},{status:y,data:u}=await f.product.getAllProducts(c);y.value==="success"&&(P.value=((t=u.value)==null?void 0:t.content)||[],w.value=((a=u.value)==null?void 0:a.totalPages)||0);const{data:d}=await f.product.getProductsCount();d&&(V.value=d.value)}catch(c){throw new Error(c)}finally{i("global",!1)}}async function $(t){try{i("global",!0);const{status:a}=await f.product.sendFromArchive(t);a.value==="success"&&x()}catch(a){throw new Error(a)}finally{i("global",!1)}}function z(t){E.push({path:N(v.path),query:{page:t}})}return(t,a)=>{const c=o("v-btn"),y=H,u=o("v-expansion-panel"),d=o("v-expansion-panels"),B=I,F=o("v-data-iterator"),q=o("v-pagination"),D=o("v-card"),R=o("v-container");return m(),b(R,{class:"product-list flex-grow-1 d-flex flex-col justify-start items-center"},{default:e(()=>[n(D,{class:"w-full"},{default:e(()=>[r("div",at,l(t.$t("pages.archive")),1),n(F,{items:s(P),"items-per-page":s(h)},{default:e(({items:j})=>[(m(!0),Q(X,null,W(j,(p,A)=>(m(),b(d,{key:A,variant:"accordion",class:"condensed"},{default:e(()=>[n(u,{size:"small"},{title:e(()=>[r("div",ot,[r("div",st,[r("span",null,l((s(g)-1)*s(h)+A+1),1),L(" "+l(p.raw.trackCode),1)]),r("div",nt,l(p.raw.description),1),n(c,{size:"small",color:"secondary",class:"relative !color-color1",onClick:tt(lt=>$(p.raw.id),["stop","prevent"])},{default:e(()=>[L(l(t.$t("commands.backArchive")),1)]),_:2},1032,["onClick"])])]),text:e(()=>[n(y,{id:p.raw.id},null,8,["id"])]),_:2},1024)]),_:2},1024))),128))]),"no-data":e(()=>[n(B,{class:"mt-5 mb-10"})]),_:1},8,["items","items-per-page"]),s(w)>1?(m(),b(q,{key:0,"model-value":s(g),length:s(w),class:"mt-4 mb-5",size:"x-small","onUpdate:modelValue":z},null,8,["model-value","length"])):Y("",!0)]),_:1})]),_:1})}}}),pt=et(ct,[["__scopeId","data-v-0d371a8d"]]);export{pt as default};
