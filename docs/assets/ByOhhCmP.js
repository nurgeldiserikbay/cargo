import{v as j,_ as A}from"./8mfzyVxX.js";import{_ as F}from"./BTY3tPn9.js";import{d as M,b as T,G as V,a as $,u as D,A as E,C as G,r as l,o as K,c as U,e as n,z as r,f as t,t as i,h as e,i as Z,m as g,g as b,_ as q}from"./DBCDSuVQ.js";import{t as H,z as c,u as J,a as h}from"./Drm0Q-Yl.js";const O={class:"flex-grow-1 d-flex flex-col justify-center items-center pt-6"},Q={class:"text-2xl mb-4 capitalize lg:text-3xl"},R={class:"d-flex justify-center"},oe=M({__name:"login",setup(W){const{setError:m}=T(),v=V(),{setLoading:d}=$(),{t:o}=D(),x=H(c.object({phoneNumber:c.string().refine(s=>j.isMobilePhone(s.replace(/\D/g,""),"kk-KZ")),password:c.string().min(4)})),{errors:p,handleSubmit:w,defineComponentBinds:u}=J({validationSchema:x}),N=u("phoneNumber"),y=u("password"),{status:_,signIn:z}=E(),f=w(async s=>{try{d("global",!0),await z({...s,phoneNumber:G(s.phoneNumber||"")},{callbackUrl:v("/")}),_.value==="unauthenticated"&&m({title:_.value||""})}catch(a){a.status&&m({title:o("messages.loginError")})}finally{d("global",!1)}});return(s,a)=>{const k=A,I=F,C=l("v-btn"),L=q,P=l("v-card"),S=l("v-container");return K(),U(S,null,{default:n(()=>[r("div",O,[t(P,{class:"d-flex flex-col items-center w-full max-w-400px px-5 py-5 pb-6 mb-12 rounded-lg"},{default:n(()=>[r("div",Q,i(e(o)("pages.login")),1),r("form",{class:"w-full grid gap-x-3 gap-y-4",onSubmit:a[0]||(a[0]=Z((...B)=>e(f)&&e(f)(...B),["prevent"]))},[t(k,g(e(N),{label:e(o)("labels.phoneNumber"),"error-messages":("zodI18n"in s?s.zodI18n:e(h))(e(p).phoneNumber)}),null,16,["label","error-messages"]),t(I,g(e(y),{label:e(o)("labels.password"),"error-messages":("zodI18n"in s?s.zodI18n:e(h))(e(p).password)}),null,16,["label","error-messages"]),r("div",R,[t(C,{variant:"elevated",type:"submit"},{default:n(()=>[b(i(e(o)("pages.login")),1)]),_:1})])],32),t(L,{to:"/auth/register",class:"mt-8 no-underline text-color1"},{default:n(()=>[b(i(e(o)("pages.register")),1)]),_:1})]),_:1})])]),_:1})}}});export{oe as default};
